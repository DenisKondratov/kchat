(this.webpackJsonpkchat=this.webpackJsonpkchat||[]).push([[0],{24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n.n(r),a=n(15),s=n.n(a),i=(n(24),n(9)),o=n(12);n(31),n(25),n(32);o.a.initializeApp({apiKey:"AIzaSyCpLZrm1KWIrTsiJ7MFLLc7l1YQ0WKMtPc",authDomain:"kchat-6433f.firebaseapp.com",projectId:"kchat-6433f",storageBucket:"kchat-6433f.appspot.com",messagingSenderId:"150724511779",appId:"1:150724511779:web:457e3cbfec9dafcc4f8996"});var u=o.a,d=n(17),b=n(14),l=n.n(b),h=n(18),j=n(19),m=n(4),f=u.auth();function p(e){var t=e.message,n=t.text,r=t.uid,c=t.photoURL,a=r===f.currentUser.uid?"send":"recived";return Object(m.jsxs)("div",{className:"shadow-sm p-3 mb-1 bg-body rounded ".concat(a),children:[Object(m.jsx)("img",{style:{width:50,height:50,borderRadius:"50%"},src:c,alt:"somePic"}),Object(m.jsx)("p",{children:n})]})}var g=function(e){var t=e.firestore.collection("messages"),n=t.orderBy("createdAt").limit(100),c=Object(j.a)(n,{idField:"id"}),a=Object(i.a)(c,1)[0],s=Object(r.useRef)(),o=Object(r.useState)(""),d=Object(i.a)(o,2),b=d[0],g=d[1],O=function(){var e=Object(h.a)(l.a.mark((function e(n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b.trim()){e.next=3;break}return e.abrupt("return");case 3:return r=f.currentUser,c=r.uid,a=r.photoURL,e.next=6,t.add({text:b,createdAt:u.firestore.FieldValue.serverTimestamp(),uid:c,photoURL:a});case 6:g(""),s.current.scrollIntoView({behavior:"smooth"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("header",{className:"d-flex justify-content-between p-2 bg-primary text-light",children:[Object(m.jsx)("h1",{className:"fs-3",children:"Secret chat for Bodya and Den"}),Object(m.jsx)("button",{onClick:function(){f.signOut()},className:"btn btn-danger",children:"SignOut"})]}),Object(m.jsxs)("div",{className:"mainWrap",style:{overflowX:"hidden"},children:[a&&a.map((function(e){return Object(m.jsx)(p,{message:e,auth:f},e.id)})),Object(m.jsx)("div",{ref:s})]}),Object(m.jsxs)("form",{onSubmit:O,className:"d-flex justify-content-center mt-2",children:[Object(m.jsx)("input",{className:"form-control w-50 me-2",value:b,onChange:function(e){return g(e.target.value)}}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})]})},O=function(e){var t=e.auth;return Object(m.jsx)("button",{onClick:function(){var e=new u.auth.GoogleAuthProvider;t.signInWithPopup(e)},className:"btn btn-primary",children:"SignIn with Google"})},x=u.auth(),v=u.firestore();var y=function(){var e=Object(d.a)(x),t=Object(i.a)(e,1)[0];return console.log(x.currentUser),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{}),Object(m.jsx)("section",{className:"w-50 shadow-lg p-3 mb-5 bg-body rounded",style:{margin:"0 auto"},children:t?Object(m.jsx)(g,{auth:x,firestore:v}):Object(m.jsx)(O,{auth:x,user:t})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),w()}},[[30,1,2]]]);
//# sourceMappingURL=main.4eeccb3a.chunk.js.map